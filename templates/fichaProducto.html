<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle del Producto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../styles/fichaProducto.css">
</head>
<body>

    <!-- barra de navegacion -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <!-- Logo como imagen en lugar de enlace de texto -->
        <a class="navbar-brand" href="../index.html">
            <img src="../assets/images/logo.png" alt="Logo" style="width: 85px; height: auto;">
        </a>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <!-- Cambié el primer nav-item por una imagen en lugar de un enlace de texto -->
                <li class="nav-item">
                    <a class="nav-link" href="./iniciarSesion.html">Quiero vender</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        ¿No tienes una cuenta?
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="./iniciarSesion.html">Iniciar sesión</a></li>
                        <li><a class="dropdown-item" href="./resgistrar.html">Registrarse</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                    </ul>
                </li>
            </ul>
            
            <!-- Carrito -->
            <ul>
                <li> 
                    <button id="cart-icon" class="btn btn-light position-relative">
                        <img src="../assets/images/cart.png" alt="Carrito" style="width: 45px; height:auto;">
                        <span id="contador-carrito">0</span>
                    </button>
                </li> 
            </ul>
            
            <!-- Formulario de búsqueda -->
            <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Buscar productos" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Buscar</button>
            </form>
        </div>
    </div>
</nav>

    <div class="product-container">
        <!-- Producto principal -->
        <div class="product-card">
            <div class="product-img">
                <img id="product-image" src="" alt="Imagen del producto">
            </div>
            <div class="product-details">
                <h1 id="product-name">Nombre del Producto</h1>
                <p id="product-description">Descripción del producto...</p>
                <p class="product-price"><span id="product-price">0</span></p>
                <!-- Botón de agregar al carrito -->
                <script>
                    // Obtener los parámetros de la URL
                    const urlParams = new URLSearchParams(window.location.search);
                    
                    // Extraer los valores de los parámetros
                    const productId = urlParams.get('id');
                    const productName = urlParams.get('name');
                    const productPrice = parseFloat(urlParams.get('price'));
                    const productImage = urlParams.get('image');
                    const productDescription = urlParams.get('description');
                    
                    // Verifica que los parámetros están correctamente obtenidos (para depuración)
                    console.log('Product ID:', productId);
                    console.log('Product Name:', productName);
                    console.log('Product Price:', productPrice);
                    console.log('Product Image:', productImage);
                    console.log('Product Description:', productDescription);
                    
                    // Función para agregar el producto al carrito
                    function addProductCart() {
                        // Verificamos que todos los valores estén definidos
                        if (productId && productName && productPrice && productDescription) {
                            // Estructura del producto a agregar al carrito
                            const cartProduct = {
                                id: productId,
                                name: productName,
                                price: productPrice,
                                image: productImage,
                                description: productDescription
                            };
                    
                            // Agregar el producto al carrito en el localStorage
                            let cart = JSON.parse(localStorage.getItem('carrito')) || [];
                            cart.push(cartProduct);
                            localStorage.setItem('carrito', JSON.stringify(cart));
                    
                            alert('Producto agregado al carrito');
                            console.log('Producto agregado al carrito:', cartProduct);
                        } else {
                            alert('Error: Parámetros del producto no encontrados.');
                        }
                    }
                    </script>
                    
                <button class="btn-agregar" onclick="addProductCart()">Agregar al carrito</button>
            </div>
        </div>
    </div>

    <!-- Otros productos -->
    <h2 style="text-align: center; margin-top: 40px;">Otros productos que te pueden interesar</h2>
    <div class="other-products-container" id="other-products-container"></div>

        
<!-- Modal de Carrito -->
<div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="cartModalLabel">Bienvenido a tu carrito</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">

                <div id="cart-items">
                    <p>No hay productos en el carrito.</p>
                </div>
                <div id="total-container"></div>
            </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" onclick="clearCart()">Limpiar carrito</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-primary" id="checkoutBtn">Comprar ahora</button>
                <div>
                    
            </div>
        </div>
    </div>
</div>

    <footer>
        <div class="column">
            <li>Encuentra productos y servicios para tu mascota <br> 
            &copy; Todos los derechos reservados a Petshop</li>
        </div>
        <div class="column">
            <h3 class="titlefooterppal">RECURSOS</h3>
            <ul class="ulFooter">
                <li>Términos y condiciones</li>
                <li>Política de privacidad</li>
                <li>Políticas de devolución y reembolso</li>
            </ul>
        </div>
        <div class="column">
            <h3 class="titlefooterppal">EMPRESAS</h3>
            <ul class="ulFooter">
                <li>Cómo funciona</li>
                <li>Contacto</li>
                <li>Únete a nuestra comunidad</li>
            </ul>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.3/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
   
    <script src="../scripts/otros.js"></script>
    <script src="../scripts/addCart.js"></script>
    <script src="../scripts/index.js"></script>

    
</body>
</html>
